{% extends "layout.html" %}

{% block content %}

<br>
<!-- Main container -->

<div class="container-fluid col-md-custom col-md-offset-custom">
  <div class="row text-center">
  </div>

   <body class="cards-pf">
      <div class="container-fluid container-cards-pf col-md-offset-0">
        <div class="row row-cards-pf">

     <div class="col-xs-6 col-sm-4 col-md-4">
            <div class="card-pf card-pf-accented card-pf-aggregate-status card-pf-aggregate-status-mini">
  <h2 class="card-pf-title">
    <a href="#">
      <span class="pficon pficon-registry"></span>
      <a href="{{ url_for('jobs.index') }}">
          <span class="card-pf-aggregate-status-count">{{ jobs_num }} Jobs</span>
      </a>
    </a>
  </h2>
  <div class="card-pf-body">
    <p class="card-pf-aggregate-status-notifications">
    </p>
  </div>
  </div>
  </div>


     <div class="col-xs-6 col-sm-4 col-md-4">
            <div class="card-pf card-pf-accented card-pf-aggregate-status card-pf-aggregate-status-mini">
  <h2 class="card-pf-title">
    <a href="#">
      <span class="pficon pficon-cluster"></span>
      <a href="{{ url_for('nodes.index') }}">
          <span class="card-pf-aggregate-status-count">{{ nodes_num }} Nodes</span>
      </a>
    </a>
  </h2>
  <div class="card-pf-body">
    <p class="card-pf-aggregate-status-notifications">
    </p>
  </div>
  </div>
  </div>

     <div class="col-xs-6 col-sm-4 col-md-4">
            <div class="card-pf card-pf-accented card-pf-aggregate-status card-pf-aggregate-status-mini">
  <h2 class="card-pf-title">
    <a href="#">
      <span class="pficon pficon-bundle"></span>
      <a href="{{ url_for('plugins.index') }}">
          <span class="card-pf-aggregate-status-count">{{ plugins_num }} Plugins</span>
      </a>
    </a>
  </h2>
  <div class="card-pf-body">
    <p class="card-pf-aggregate-status-notifications">
    </p>
  </div>
  </div>
  </div>

</div>
</div>

<br><br><br>

      <div class="row">
  <div class="form-group">
    <div class="col-sm-offset-4 col-sm-4">
      <a href="{{ url_for('dfg.index') }}"><button class="btn btn-warning btn-lg" style="height:130px;width:250px"><font size="5">DFG View</font></button></a>
      <a href="{{ url_for('home.releases') }}"><button class="btn btn-primary btn-lg" style="height:130px;width:250px"><font size="5">Release View</font></button></a>
</div>
  </div>
      </div>

  <br><br><br><br>

  <div class="container-fluid">
  <!-- Top Failing Tests Table -->
      <div class="row">
        <div class="col-lg-6">
          <h3>
              <strong>Top Failing Tests</strong>
          </h3>
          <table class="table table-striped table-bordered table-hover" id="failing_tests">
            <thead>
              <tr>
                <th>Class Name</th>
                <th>Failure Count</th>
                <th>Success Count</th>
              </tr>
            </thead>
          </table>
        </div>


    <!-- Top CI Failure Types table-->
        <div class="col-lg-6">
          <h3>
              <strong>CI Failure Types</strong>
          </h3>
          <table class="table table-striped table-bordered table-hover" id="failure_types">
            <thead>
              <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Count</th>
              </tr>
            </thead>
          </table>
        </div>

      </div>
    </div>


<script>
    $('#failing_tests').DataTable( {
        "ajax": "{{ url_for('tests.top_failing_tests') }}",
    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
        $('td', nRow).css('background-color', '#f2dede' );
    }
    });

    $('#failure_types').DataTable( {
        "ajax": "{{ url_for('builds.top_failure_types') }}",
    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
        $('td', nRow).css('background-color', '#f2dede' );
    }
    });
</script>

{% endblock %}
